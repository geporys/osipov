{"version":3,"sources":["components/Home.jsx","App.js","reportWebVitals.js","index.js"],"names":["useStyle","makeStyles","input","display","paper","padding","flexDirection","alignItems","img","width","root","height","send","margin","formControl","minWidth","upload","justifyContent","title","listFiles","maxHeight","overflowY","Home","classes","initialState","useState","state","setState","files","setFiles","isOk","setIsOk","isError","setIsError","handleSelect","e","type","target","value","handleSubmit","preventDefault","formdata","FormData","name","append","forEach","file","axios","post","headers","then","response","catch","console","log","status","Typography","component","variant","className","Alert","alert","severity","Boolean","length","List","map","id","ListItem","ListItemAvatar","alt","src","previewUrl","FormControl","InputLabel","Select","labelId","onChange","label","MenuItem","ListItemSecondaryAction","IconButton","onClick","fileId","filter","edge","aria-label","onSubmit","uploadedfiles","dataTransfer","ArrayFiles","Array","from","index","uniqid","URL","createObjectURL","select","accept","multiple","htmlFor","Button","color","startIcon","endIcon","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ec0dea1c.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport uniqid from 'uniqid';\n\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { FormControl, InputLabel, MenuItem, Select, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport axios from 'axios';\nimport { Alert } from '@material-ui/lab';\n\nconst useStyle = makeStyles({\n  input: {\n    display: 'none',\n  },\n  paper: {\n    display: 'flex',\n    padding: '8px',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  img: {\n    width: '300px',\n  },\n  root: {\n    height: '100vh',\n  },\n  send: {\n    margin: '10px',\n  },\n  formControl: {\n    minWidth: 120,\n    margin: '10px',\n  },\n  upload: {\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: 24,\n  },\n  title: {\n    margin: '24px',\n  },\n  listFiles: {\n    maxHeight: '70ex',\n    overflowY: 'scroll',\n  },\n});\n\nconst Home = () => {\n  const classes = useStyle();\n\n  const initialState = {};\n  const [state, setState] = useState(initialState);\n  const [files, setFiles] = useState([]);\n  const [isOk, setIsOk] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  // const handleChange = (field) => (e) => {\n  //   const { value } = e.target;\n  //   setState({ ...state, [field]: value });\n  // };\n\n  const handleSelect = (e) => {\n    setState({\n      type: e.target.value,\n    });\n  };\n\n  const handleUploadFiles = (e) => {\n    let uploadedfiles = e.target.files || e.dataTransfer.files;\n    if (!uploadedfiles.length) return;\n\n    const ArrayFiles = Array.from(uploadedfiles);\n\n    setFiles([\n      ...ArrayFiles.map((file, index) => ({\n        id: uniqid(),\n        name: file.name,\n        file: uploadedfiles[index],\n        previewUrl: URL.createObjectURL(file),\n        select: '',\n      })),\n      ...files,\n    ]);\n  };\n\n  const handleDeleteFile = (fileId) => () => {\n    setFiles(files.filter(({ id }) => id !== fileId));\n  };\n\n  const remove = () => {\n    setFiles([]);\n    setState(initialState);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const formdata = new FormData();\n\n    for (const name in state) {\n      formdata.append(name, state[name]);\n    }\n\n    files.forEach(({ file }) => {\n      formdata.append('file', file);\n    });\n\n    axios\n      .post('/file', formdata, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          'Access-Control-Allow-Credentials': true,\n        },\n      })\n      .then((response) => {})\n      .catch(({ response }) => {\n        console.log(response);\n        // eslint-disable-next-line no-console\n        if (response && response.status !== 200) {\n          setIsOk(false);\n          setIsError(true);\n          return;\n        }\n        remove();\n        setIsError(false);\n        setIsOk(true);\n      });\n  };\n\n  return (\n    <div>\n      <Typography component=\"h1\" variant=\"h4\" className={classes.title}>\n        Загрузите фото\n      </Typography>\n      {isOk && <Alert className={classes.alert}>Данные были отправлены!</Alert>}\n      {isError && (\n        <Alert className={classes.alert} severity=\"error\">\n          Ошибка!\n        </Alert>\n      )}\n      <div>\n        {Boolean(files.length) && (\n          <List className={classes.listFiles}>\n            {files.map((file, id) => (\n              <ListItem key={file.id}>\n                <ListItemAvatar title={file.name}>\n                  <img className={classes.img} alt={`${file.id}`} src={`${file.previewUrl}`} />\n                </ListItemAvatar>\n                {/*<ListItemText primary={file.name} />*/}\n                <FormControl variant=\"outlined\" className={classes.formControl}>\n                  <InputLabel id=\"grouped-select\">Выборка</InputLabel>\n                  <Select\n                    labelId=\"grouped-select\"\n                    id=\"grouped-select\"\n                    value={state.type}\n                    onChange={handleSelect}\n                    label=\"Выборка\"\n                  >\n                    <MenuItem value={'potato'}>Картошка</MenuItem>\n                    <MenuItem value={'other'}>Не картошка</MenuItem>\n                  </Select>\n                </FormControl>\n                <ListItemSecondaryAction>\n                  <IconButton onClick={handleDeleteFile(file.id)} edge=\"end\" aria-label=\"delete\">\n                    <DeleteIcon />\n                  </IconButton>\n                </ListItemSecondaryAction>\n              </ListItem>\n            ))}\n          </List>\n        )}\n        <form onSubmit={handleSubmit}>\n          <div className={classes.upload}>\n            <input\n              onChange={handleUploadFiles}\n              name=\"files\"\n              accept=\"image/*\"\n              className={classes.input}\n              id=\"contained-button-file\"\n              multiple\n              type=\"file\"\n            />\n            <label htmlFor=\"contained-button-file\">\n              <Button\n                onClick={() => {}}\n                variant=\"contained\"\n                color=\"primary\"\n                component=\"span\"\n                startIcon={<CloudUploadIcon />}\n              >\n                Добавить файлы\n              </Button>\n            </label>\n            {Boolean(files.length) && (\n              <Button\n                className={classes.send}\n                onClick={handleSubmit}\n                variant=\"contained\"\n                label=\"Отправить\"\n                endIcon={<SendIcon />}\n              >\n                Отправить\n              </Button>\n            )}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport Home from '../src/components/Home'\n\nfunction App() {\n  return (\n    <>\n    <Home/>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}